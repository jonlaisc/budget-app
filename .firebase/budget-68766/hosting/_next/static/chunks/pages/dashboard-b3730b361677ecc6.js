(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[26],{9704:function(e,n,t){(window.__NEXT_P=window.__NEXT_P||[]).push(["/dashboard",function(){return t(9176)}])},9176:function(e,n,t){"use strict";t.r(n),t.d(n,{ENTRY_ENUM:function(){return be},default:function(){return me}});var r=t(4051),a=t.n(r),o=t(5893),i=t(7294),s=t(9008),c=t(1163),u=t(8456),l=t(7948),d=t(6798),f=t(1737),p=t(6447),h=t(5861),x=t(4674),y=t(1519),v=t(2492),b=t(9581),g=t(1425),j=t(3321),m=t(6540),w=t(7357),Z=t(2293),C=t(155),_=t(2231),k=t(4639),E=t.n(k);function D(){var e=(0,_.aC)(),n=e.authUser,t=e.signOut;return(0,o.jsx)(w.Z,{sx:{flexGrow:1},children:(0,o.jsx)(Z.Z,{position:"static",className:E().appbar,children:(0,o.jsx)(C.Z,{className:E().toolbar,children:(0,o.jsxs)(l.Z,{className:E().container,children:[(0,o.jsx)(h.Z,{variant:"h3",sx:{flexGrow:1,alignSelf:"center"},children:"Mum's Diaryy"}),(0,o.jsxs)(p.Z,{direction:"row",spacing:2,sx:{alignItems:"center"},children:[(0,o.jsx)(h.Z,{variant:"h6",sx:{flexGrow:1},children:null===n||void 0===n?void 0:n.email}),(0,o.jsx)(j.Z,{variant:"text",color:"secondary",onClick:t,children:"Logout"})]})]})})})})}var S=t(1733),O=t(7957),N=t(2912),T=t(1933),P=t.n(T);function R(e){var n=e.entry;return(0,o.jsx)("div",{children:(0,o.jsxs)(p.Z,{direction:"row",justifyContent:"space-between",sx:{margin:"1em 0"},children:[(0,o.jsx)(p.Z,{direction:"row",spacing:2,sx:{alignItems:"center"},children:(0,o.jsxs)(p.Z,{direction:"row",className:P().contentRow,children:[(0,o.jsxs)(p.Z,{direction:"column",sx:{flexGrow:1},children:[(0,o.jsx)(h.Z,{variant:"h3",children:(0,N.Z)(n.date,"dd/MM/yyyy")}),(0,o.jsxs)(h.Z,{variant:"h4",children:["$",n.amount]})]}),(0,o.jsxs)(p.Z,{direction:"column",sx:{flexGrow:1},children:[(0,o.jsx)(h.Z,{variant:"h5",children:n.category}),(0,o.jsx)(h.Z,{variant:"h7",children:n.subCategory})]})]})}),(0,o.jsxs)(p.Z,{direction:"row",className:P().actions,children:[(0,o.jsx)(x.Z,{"aria-label":"edit",color:"secondary",onClick:e.onEdit,children:(0,o.jsx)(O.Z,{})}),(0,o.jsx)(x.Z,{"aria-label":"delete",color:"secondary",onClick:e.onDelete,children:(0,o.jsx)(S.Z,{})})]})]})})}var J=t(3741),G=t(9669),U=t(4596),I=t(720),M=t(5321),F=t(8735),X=t(6179);function z(e,n,t,r,a,o,i){try{var s=e[o](i),c=s.value}catch(u){return void t(u)}s.done?n(c):Promise.resolve(c).then(r,a)}function L(e){return function(){var n=this,t=arguments;return new Promise((function(r,a){var o=e.apply(n,t);function i(e){z(o,r,a,i,s,"next",e)}function s(e){z(o,r,a,i,s,"throw",e)}i(void 0)}))}}function A(e,n,t){return n in e?Object.defineProperty(e,n,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[n]=t,e}function B(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{},r=Object.keys(t);"function"===typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(t).filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})))),r.forEach((function(n){A(e,n,t[n])}))}return e}var H="Expenses",W="Incomes",Y="Entries";function Q(e,n,t,r,a,o){return V.apply(this,arguments)}function V(){return(V=L(a().mark((function e(n,t,r,o,i,s){var c,u,l,d,f;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return c=(0,M.JU)(F.db,_.nb,n),e.next=3,(0,M.QT)(c);case 3:return u=e.sent,e.next=6,(0,M.ET)((0,M.hJ)(c,Y),{entryType:t,category:r,subCategory:o,date:i,amount:s});case 6:if(t!==H){e.next=11;break}l=X.TO,e.next=16;break;case 11:if(t!==W){e.next=15;break}l=X.jJ,e.next=16;break;case 15:throw new Error("Not valid entry type.");case 16:if(d=u.data()[l],-1===(f=d.findIndex((function(e){return e.name===r})))||d[f].subCategories.includes(o)){e.next=22;break}return d[f].subCategories.push(o),e.next=22,(0,M.r7)(c,A({},l,d));case 22:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function $(e,n,t,r,a,o,i){return q.apply(this,arguments)}function q(){return(q=L(a().mark((function e(n,t,r,o,i,s,c){var u;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return u=(0,M.JU)(F.db,_.nb,n),e.next=3,(0,M.pl)((0,M.JU)(u,Y,t),{entryType:r,category:o,subCategory:i,date:s,amount:c});case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function K(e,n){return ee.apply(this,arguments)}function ee(){return(ee=L(a().mark((function e(n,t){var r;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=(0,M.JU)(F.db,_.nb,n),e.next=3,(0,M.oe)((0,M.JU)(r,Y,t));case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function ne(e,n){return te.apply(this,arguments)}function te(){return te=L(a().mark((function e(n,t){var r,o,i;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=(0,M.JU)(F.db,_.nb,n),o=(0,M.IO)((0,M.hJ)(r,Y),(0,M.Xo)("date","desc"),(0,M.b9)(50)),i=(0,M.cf)(o,function(){var e=L(a().mark((function e(n){var r,o,i,s,c,u,l,d;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:for(r=[],o=!0,i=!1,s=void 0,e.prev=2,c=n.docs[Symbol.iterator]();!(o=(u=c.next()).done);o=!0)l=u.value,d=l.data(),r.push(B({},d,{date:d.date.toDate(),id:l.id}));e.next=10;break;case 6:e.prev=6,e.t0=e.catch(2),i=!0,s=e.t0;case 10:e.prev=10,e.prev=11,o||null==c.return||c.return();case 13:if(e.prev=13,!i){e.next=16;break}throw s;case 16:return e.finish(13);case 17:return e.finish(10);case 18:t(r);case 19:case"end":return e.stop()}}),e,null,[[2,6,10,18],[11,,13,17]])})));return function(n){return e.apply(this,arguments)}}()),e.abrupt("return",i);case 4:case"end":return e.stop()}}),e)}))),te.apply(this,arguments)}var re=t(6409),ae=t.n(re);function oe(e,n,t,r,a,o,i){try{var s=e[o](i),c=s.value}catch(u){return void t(u)}s.done?n(c):Promise.resolve(c).then(r,a)}function ie(e){return function(){var n=this,t=arguments;return new Promise((function(r,a){var o=e.apply(n,t);function i(e){oe(o,r,a,i,s,"next",e)}function s(e){oe(o,r,a,i,s,"throw",e)}i(void 0)}))}}function se(e,n,t){return n in e?Object.defineProperty(e,n,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[n]=t,e}function ce(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{},r=Object.keys(t);"function"===typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(t).filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})))),r.forEach((function(n){se(e,n,t[n])}))}return e}var ue={category:"",subCategory:"",date:new Date,amount:""};function le(e){var n=(0,_.aC)().authUser,t=Object.keys(e.edit).length>0,r=(0,i.useState)(t?e.edit:ue),s=r[0],c=r[1],u=(0,i.useState)(!1),l=u[0],d=u[1],f=(0,i.useState)(s.category),x=f[0],y=f[1],m=(0,i.useState)([]),w=m[0],Z=m[1],C=(0,i.useState)([]),k=C[0],E=C[1],D=(0,i.useState)(""),S=D[0],O=D[1];(0,i.useEffect)((function(){if(e.showDialog){function r(){return o.apply(this,arguments)}function o(){return(o=ie(a().mark((function e(){var t,r;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,X.Wb)(n.uid);case 2:return t=e.sent,e.next=5,(0,X.nh)(n.uid);case 5:r=e.sent,Z(t),E(r);case 8:case"end":return e.stop()}}),e)})))).apply(this,arguments)}c(t?e.edit:ue),y(""),O(H),r()}}),[e.edit,e.showDialog]);var N=function(e,n){c((function(t){return ce({},t,se({},n,e.target.value))}))},T=function(){d(!1),e.onCloseDialog()},P=function(){var r=ie(a().mark((function r(){return a().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:if(d(!0),r.prev=1,!t){r.next=7;break}return r.next=5,$(n.uid,s.id,s.entryType,s.category,s.subCategory,s.date,parseFloat(parseFloat(s.amount).toFixed(2)));case 5:r.next=9;break;case 7:return r.next=9,Q(n.uid,S,s.category,s.subCategory,s.date,parseFloat(parseFloat(s.amount).toFixed(2)));case 9:e.onSuccess(t?be.edit:be.add),r.next=15;break;case 12:r.prev=12,r.t0=r.catch(1),e.onError(t?be.edit:be.add);case 15:T();case 16:case"end":return r.stop()}}),r,null,[[1,12]])})));return function(){return r.apply(this,arguments)}}(),R=function(e,n){return(0,o.jsxs)("div",{children:[(0,o.jsx)(h.Z,{variant:"h6",className:ae().categoryTitle,children:n}),(0,o.jsx)("div",{className:ae().categoryTiles,children:e.map((function(e,t){return(0,o.jsx)("div",{className:"".concat(ae().categoryTile," ").concat(x===e.name?ae().selectedCategory:""),onClick:function(){return function(e,n){y(e),O(n),c((function(n){return ce({},n,{category:e})}))}(e.name,n)},children:e.name},t)}))})]})};return(0,o.jsxs)(v.Z,{classes:{paper:ae().dialog},onClose:function(){return T()},open:e.showDialog,component:"form",children:[(0,o.jsxs)(h.Z,{variant:"h4",className:ae().title,children:[t?"EDIT":"ADD"," EXPENSE"]}),(0,o.jsxs)(b.Z,{className:ae().fields,children:[(0,o.jsx)(p.Z,{children:(0,o.jsx)(I._,{dateAdapter:G.Z,children:(0,o.jsx)(U.M,{label:"Date",value:s.date,onChange:function(e){c((function(n){return ce({},n,{date:e})}))},maxDate:new Date,renderInput:function(e){return(0,o.jsx)(J.Z,ce({color:"tertiary"},e))}})})}),R(w,H),R(k,W),(0,o.jsx)(J.Z,{color:"tertiary",label:"Sub-Category",variant:"standard",value:s.subCategory,onChange:function(e){return N(e,"subCategory")}}),(0,o.jsx)(J.Z,{color:"tertiary",label:"Amount",variant:"standard",type:"number",value:s.amount,onChange:function(e){return N(e,"amount")}})]}),(0,o.jsx)(g.Z,{children:l?(0,o.jsx)(j.Z,{color:"secondary",variant:"contained",disabled:!0,children:"Submitting..."}):(0,o.jsx)(j.Z,{color:"secondary",variant:"contained",onClick:P,disabled:!s.date||0===s.category.length||0===s.subCategory.length||s.amount<=0,children:"Submit"})})]})}var de=t(358),fe=t.n(de);function pe(e,n,t,r,a,o,i){try{var s=e[o](i),c=s.value}catch(u){return void t(u)}s.done?n(c):Promise.resolve(c).then(r,a)}function he(e){return function(){var n=this,t=arguments;return new Promise((function(r,a){var o=e.apply(n,t);function i(e){pe(o,r,a,i,s,"next",e)}function s(e){pe(o,r,a,i,s,"throw",e)}i(void 0)}))}}function xe(e,n,t){return n in e?Object.defineProperty(e,n,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[n]=t,e}var ye,ve,be=Object.freeze({none:0,add:1,edit:2,delete:3}),ge=(xe(ye={},be.add,"Entry was successfully added!"),xe(ye,be.edit,"Entry was successfully updated!"),xe(ye,be.delete,"Entry successfully deleted!"),ye),je=(xe(ve={},be.add,"Entry was not successfully added!"),xe(ve,be.edit,"Entry was not successfully updated!"),xe(ve,be.delete,"Entry not successfully deleted!"),ve);function me(){var e=(0,_.aC)(),n=e.authUser,t=e.isLoading,r=(0,c.useRouter)(),w=(0,i.useState)(be.none),Z=w[0],C=w[1],k=(0,i.useState)([]),E=k[0],S=k[1],O=(0,i.useState)(""),N=O[0],T=O[1],P=(0,i.useState)({}),J=P[0],G=P[1],U=(0,i.useState)(""),I=U[0],M=U[1],F=(0,i.useState)(!1),X=F[0],z=F[1],L=(0,i.useState)(!1),A=L[0],B=L[1],H=function(){var e=he(a().mark((function e(n,t){return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:M(t?ge[n]:je[n]),t?z(!0):B(!0),C(be.none);case 3:case"end":return e.stop()}}),e)})));return function(n,t){return e.apply(this,arguments)}}();(0,i.useEffect)((function(){t||n||r.push("/")}),[n,t]),(0,i.useEffect)(he(a().mark((function e(){var t;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!n){e.next=5;break}return e.next=3,ne(n.uid,S);case 3:return t=e.sent,e.abrupt("return",(function(){return t()}));case 5:case"end":return e.stop()}}),e)}))),[n]);var W=function(){C(be.none),T("")},Y=function(){var e=he(a().mark((function e(){var t;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=!0,e.prev=1,e.next=4,K(n.uid,N);case 4:e.next=9;break;case 6:e.prev=6,e.t0=e.catch(1),t=!1;case 9:W(),H(be.delete,t);case 11:case"end":return e.stop()}}),e,null,[[1,6]])})));return function(){return e.apply(this,arguments)}}();return n?(0,o.jsxs)("div",{children:[(0,o.jsx)(s.default,{children:(0,o.jsx)("title",{children:"Mum's Diary"})}),(0,o.jsx)(D,{}),(0,o.jsxs)(l.Z,{children:[(0,o.jsx)(d.Z,{open:X,autoHideDuration:1500,onClose:function(){return z(!1)},anchorOrigin:{horizontal:"center",vertical:"top"},children:(0,o.jsx)(f.Z,{onClose:function(){return z(!1)},severity:"success",children:I})}),(0,o.jsx)(d.Z,{open:A,autoHideDuration:1500,onClose:function(){return B(!1)},anchorOrigin:{horizontal:"center",vertical:"top"},children:(0,o.jsx)(f.Z,{onClose:function(){return B(!1)},severity:"error",children:I})}),(0,o.jsxs)(p.Z,{direction:"row",sx:{paddingTop:"1.5em"},children:[(0,o.jsx)(h.Z,{variant:"h4",sx:{lineHeight:2,paddingRight:"0.5em"},children:"EXPENSES"}),(0,o.jsx)(x.Z,{"aria-label":"edit",color:"secondary",onClick:function(){C(be.add),G({})},className:fe().addButton,children:(0,o.jsx)(m.Z,{})})]}),E.map((function(e){return(0,o.jsxs)("div",{children:[(0,o.jsx)(y.Z,{light:!0}),(0,o.jsx)(R,{entry:e,onEdit:function(){return function(e){C(be.edit),G(e)}(e)},onDelete:function(){return n=e.id,C(be.delete),void T(n);var n}})]},e.id)}))]}),(0,o.jsx)(le,{edit:J,showDialog:Z===be.add||Z===be.edit,onError:function(e){return H(e,!1)},onSuccess:function(e){return H(e,!0)},onCloseDialog:function(){return C(be.none)}}),(0,o.jsxs)(v.Z,{open:Z===be.delete,onClose:W,children:[(0,o.jsx)(h.Z,{variant:"h4",className:fe().title,children:"DELETE ENTRY"}),(0,o.jsx)(b.Z,{children:(0,o.jsx)(f.Z,{severity:"error",children:"This will permanently delete your entry!"})}),(0,o.jsxs)(g.Z,{sx:{padding:"0 24px 24px"},children:[(0,o.jsx)(j.Z,{color:"secondary",variant:"outlined",onClick:W,children:"Cancel"}),(0,o.jsx)(j.Z,{color:"secondary",variant:"contained",onClick:Y,autoFocus:!0,children:"Delete"})]})]})]}):(0,o.jsx)(u.Z,{color:"inherit",sx:{marginLeft:"50%",marginTop:"25%"}})}},358:function(e){e.exports={primaryColor:"#fafafa",secondaryColor:"#1a73e8",tertiaryColor:"#1b3a57",successColor:"#00bfa5",errorColor:"#ff5252",fontColor:"#1b3a57",fontTitle:'"Google Sans Mono","Courier New",serif',fontDefault:'"Google Sans","Roboto",sans-serif',addButton:"dashboard_addButton__Tc34O",title:"dashboard_title__T9wDv"}},6409:function(e){e.exports={title:"expenseDialog_title__7JYks",fields:"expenseDialog_fields__jZXS6",dialog:"expenseDialog_dialog__DZRxJ",receiptImage:"expenseDialog_receiptImage__OWS9N",categoryTile:"expenseDialog_categoryTile__5ZMx4",categoryTiles:"expenseDialog_categoryTiles__OdOWl",selectedCategory:"expenseDialog_selectedCategory__jz5iS"}},4639:function(e){e.exports={primaryColor:"#fafafa",secondaryColor:"#1a73e8",tertiaryColor:"#1b3a57",successColor:"#00bfa5",errorColor:"#ff5252",fontColor:"#1b3a57",fontTitle:'"Google Sans Mono","Courier New",serif',fontDefault:'"Google Sans","Roboto",sans-serif',container:"navbar_container__VP3XG",toolbar:"navbar_toolbar__nCZks"}},1933:function(e){e.exports={contentRow:"receiptRow_contentRow__msDcs",actions:"receiptRow_actions__Lgfzn"}}},function(e){e.O(0,[589,915,774,888,179],(function(){return n=9704,e(e.s=n);var n}));var n=e.O();_N_E=n}]);